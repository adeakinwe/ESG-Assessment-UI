<div class="loan-page">

    <!-- Top Header -->
    <header class="loan-header">
        <h2>ðŸ’¸ Green Loan Application</h2>
    </header>

    <p-card class="loan-card fancy-card" header="ðŸŒ¿ Sustainable Credit Application">

        <form [formGroup]="form" (ngSubmit)="submit()" class="loan-form">

            <!-- Customer Code -->
            <div class="form-group">
                <label>Customer Code</label>

                <p-autoComplete 
                    formControlName="customerCode"
                    [suggestions]="filteredCustomers"
                    (completeMethod)="searchCustomer($event)"
                    [field]="'customerCode'"
                    (onSelect)="selectCustomer($event)"
                    [dropdown]="true"
                    [forceSelection]="true"
                    placeholder="Search by customer code or name (min 4 chars)"
                    [virtualScroll]="true"
                    [itemSize]="55"
                    class="green-input">

                    <ng-template pTemplate="dropdownicon">
                        <i *ngIf="loadingCustomer" class="pi pi-spin pi-spinner"></i>
                        <i *ngIf="!loadingCustomer" class="pi pi-chevron-down"></i>
                    </ng-template>

                </p-autoComplete>
            </div>

            <!-- Customer Name -->
            <div class="form-group">
                <label>Customer Name</label>
                <input pInputText formControlName="customerName" class="disabled-input green-input" />
            </div>

            <!-- Sector -->
            <div class="form-group">
                <label>Sector</label>
                <input pInputText formControlName="sector" class="disabled-input green-input" />
            </div>

            <!-- Amount -->
            <div class="form-group">
                <label>Amount</label>
                <input pInputText type="number" formControlName="amount" placeholder="Enter amount" class="green-input" />
            </div>

            <!-- Currency -->
            <div class="form-group">
                <label>Currency</label>
                <p-dropdown 
                    formControlName="currencyId" 
                    [options]="currencies" 
                    optionLabel="label" 
                    optionValue="value"
                    placeholder="Select currency"
                    class="green-input">
                </p-dropdown>
            </div>

            <!-- Tenor -->
            <div class="form-group">
                <label>Tenor (Days)</label>
                <input pInputText type="number" formControlName="tenorInDays" placeholder="Enter tenor" class="green-input" />
            </div>

            <!-- Product -->
            <div class="form-group">
                <label>Product</label>
                <p-dropdown 
                    formControlName="productId" 
                    [options]="products" 
                    optionLabel="label" 
                    optionValue="value"
                    placeholder="Select product"
                    class="green-input">
                </p-dropdown>
            </div>

            <!-- Interest Rate -->
            <div class="form-group">
                <label>Interest Rate (%)</label>
                <input pInputText type="number" formControlName="interestRate" placeholder="Enter interest rate" class="green-input" />
            </div>

            <!-- Loan Purpose -->
            <div class="form-group full-width">
                <label>Loan Purpose</label>
                <textarea 
                    pInputTextarea 
                    rows="3" 
                    formControlName="loanPurpose" 
                    placeholder="State the loan purpose"
                    class="green-input">
                </textarea>
            </div>

            <button pButton type="submit" label="Submit Application" class="submit-btn fancy-submit"></button>

        </form>

    </p-card>
</div>