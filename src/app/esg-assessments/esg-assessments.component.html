<div class="esg-page">

    <!--  Top Header  -->
    <header class="esg-header">
        <h2>üåø ESG Assessment Checklist</h2>
    </header>
<div class="progress-wrapper">
  <div class="progress-text">
    {{ answeredCount }} / {{ totalCount }} answered
  </div>

  <p-progressBar
    [value]="(answeredCount / totalCount) * 100"
    [showValue]="false"
    styleClass="green-progress">
  </p-progressBar>
</div>

    <div class="esg-container">

        <p-card *ngFor="let item of checklistItems" class="esg-card">

            <div class="esg-card-header">
                <h3>{{ item.item }}</h3>
                <span class="badge">{{ item.category }}</span>
            </div>

            <div class="esg-meta">
                <span class="meta-label">Indicator:</span>
                <span class="meta-value">{{ item.indicatorType }}</span>

                <span class="meta-label">Weight:</span>
                <span class="meta-value weight">{{ item.weight }}</span>
            </div>

            <div class="response-section">
                <label class="response-label">Select Response:</label>

                <p-selectButton 
                    [options]="item.responses"
                    optionLabel="label"
                    optionValue="responseValue"
                    [(ngModel)]="selectedResponses[item.checklistItemId]"
                    class="response-button"
                    (onChange)="onSelect(item.checklistItemId)">
                </p-selectButton>
            </div>

        </p-card>

    </div>

    <div class="incomplete-hint" *ngIf="!isAssessmentComplete()">
  ‚ö†Ô∏è Please complete all checklist items before submitting.
</div>

    <!-- ‚úÖ SUBMIT BAR -->
    <footer class="esg-submit-bar">
        <button
            pButton
            label="Submit ESG Assessment"
            icon="pi pi-check"
            class="p-button-success submit-btn"
            [disabled]="!isAssessmentComplete()"
            (click)="confirmSubmit()">
        </button>
    </footer>

</div>
<p-confirmDialog
  header="Confirm ESG Submission"
  icon="pi pi-exclamation-triangle"
  acceptLabel="Yes, Submit"
  rejectLabel="Review Again"
  styleClass="esg-confirm-dialog">
</p-confirmDialog>

